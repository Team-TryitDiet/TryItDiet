
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <links th:include="partials/head :: head"></links>
<<<<<<< HEAD
    <link rel="stylesheet" th:href="@{/css/other.css}">

=======
    <title>Single Post</title>
    <link rel="stylesheet" th:href="@{/css/showsinglepost.css}">
    <link rel="stylesheet" type="text/css" href="http://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
>>>>>>> 398a8c6d21edc6525d31a0dbad8579935810c244
</head>
<body class="bg50">
<div th:replace="partials/navbar :: navbar"></div>
<<<<<<< HEAD
=======

<!--design goes here-->
<!--<section>-->
<!--    <div class="container site-section" id="welcome">-->
<!--        <h1>Welcome to Mom &amp; Pop's Bakery </h1>-->
<!--        <p>Mom &amp; Pop's Bakery was founded in Paris in 1993 with the mission of giving great cake to the world. Our dedication and tasty cakes have won us numerous awards. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean id purus ipsum.-->
<!--        </p>-->
<!--        <div class="text-left"><span class="ml-1 small text-success">NOVO</span></div>-->
<!--        <div class="text-left" id="ingredients"><span class="ml-1 small text-success">NOVO</span></div>-->
<!--        <p class="d-xl-flex justify-content-xl-end">user</p>-->
<!--    </div>-->
<!--    <div class="d-xl-flex justify-content-xl-center"><button class="btn btn-primary text-left" type="button"><i class="material-icons">check_box</i></button><button class="btn btn-primary text-left" type="button"><i class="material-icons">delete_forever</i></button></div>-->
<!--</section>-->
<!--<div class="card" id="commentGroup">-->
<!--    <div class="card-header">-->
<!--        <h3>Comment</h3>-->
<!--    </div>-->
<!--    <div class="card-body">-->
<!--        <ul class="list-group">-->
<!--            <li class="list-group-item text-right" style="margin-bottom:6px;">-->
<!--                <div class="media">-->
<!--                    <div></div>-->
<!--                    <div class="media-body">-->
<!--                        <div class="media" style="overflow:visible;">-->
<!--                            <div></div>-->
<!--                            <div class="media-body" style="overflow:visible;">-->
<!--                                <div class="row">-->
<!--                                    <div class="col-md-12">-->
<!--                                        <p class="text-left"><a href="#">Sara Doe:</a><br>-->
<!--                                        </p>-->
<!--                                        <p class="text-left"> This guy has been going 100+ MPH on side streets. <br>-->
<!--                                        </p>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div><button class="btn btn-primary" type="button"><i class="fa fa-edit"></i></button><button class="btn btn-primary" type="button"><i class="icon ion-android-delete"></i></button></li>-->
<!--        </ul>-->
<!--        <div>-->
<!--            <p>Add comment</p><textarea></textarea><button class="btn btn-primary" type="button"><i class="fa fa-check"></i></button></div>-->
<!--    </div>-->
<!--</div>-->
<!--end of the design-->
>>>>>>> 398a8c6d21edc6525d31a0dbad8579935810c244
<!--            show the single post -->



<div class="container">
    <div class="card w-50">
        <div class="card-body">
            <h1 class="card-title" th:text="${post.title}"></h1>
            <div class="card-text" th:text="${post.description}"></div>
            <!--       if it is the regular post:     show diets of the regular post -->
            <div th:switch="${post.recipe == null}">
                <div th:case="${true}">
                    <div class="card" th:each="diet:${post.diets}">
                        <div class="card-text"><p th:text="${diet.title}"></p></div>
                    </div>
                    <div th:switch="${user_id !=0}">
                        <div th:case="${true}">
                            <div th:switch="${post.user.username.equals(user.username)}">
                                <div th:case="${true}">
                                    <form th:action="@{'/posts/'+ ${post.id} +'/edit'}" method="get">
<!--                                        <button type="submit" class="btn btn-primary mr-1">Edit</button>-->
<!--                                        <button type="submit" class="btn btn-primary"></button> <i class="fas fa-edit submit"></i>-->
                                        <button type="submit" class="btn btn-primary">
                                            <i class="far fa-edit submit"></i>
                                                                                </form>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="d-flex">
                                                            <!--       if it is the recipe post:      show all the elements in recipe -->
                <div th:switch="${post.recipe != null}">
                    <div th:case="${true}">
                        <form th:action="@{/posts/recipe/edit}" method="get">
                            <input type="hidden" name="postId" th:value="${post.id}">
                            <div class="card-text"><p th:text="${post.recipe.notes}"></p></div>
                            <div class="card-text"><p th:text="${post.recipe.preparation}"></p></div>
                            <div class="card" th:each="diet:${post.recipe.diets}">
                                <div class="card-text"><p th:text="${diet.title}"></p></div>
                            </div>
                            <!--                                    check if the user login -->
                            <div th:switch="${user_id !=0}">
                                <div th:case="${true}">
                                    <!--                                    if login check if the current user equals the user who create the recipe -->
                                    <div th:switch="${post.user.username.equals(user.username)}">
                                        <div th:case="${true}">
<!--                                            <button type="submit" class="btn btn-primary mr-1">Edit</button>-->
                                            <button type="submit" class="btn btn-primary">
                                                <i class="far fa-edit submit"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <!-- delete button only for the user login and who build the post(regular post && recipe post) -->
            <div class="d-flex">
                <div th:switch="${user_id !=0}">
                    <div th:case="${true}">
                        <div th:switch="${post.user.username.equals(user.username)}">
                            <div th:case="${true}">
                                <form th:action="@{'/posts/delete/' + ${post.id}}" method="get">
                                    <button type="submit" class="btn btn-danger">
                                        <i class="far fa-trash-alt submit"></i>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card-text" th:text="${post.getUser().getUsername()}"></div>
        </div>
    </div>
</div>
<<<<<<< HEAD
<!--    Create a comment only if the user login-->

=======

<!-- Create a comment only if the user login-->
>>>>>>> 398a8c6d21edc6525d31a0dbad8579935810c244
<div class="d-flex">
    <div class="card-body">
        <div class="card w-50">
    <div class="content">
        <div class="card-body w-50 ">
        <div th:switch="${user_id !=0}">
            <div th:case="${true}">
                <h3 id="">Create a Comment</h3>
                <form th:action="@{'/posts/comment'}" th:object="${newComment}" method="post">
                    <input type="hidden" th:value="${post.id}" name="postId">
<!--                    <label for="body">Comment Body</label>-->
                    <textarea class="w-100 h-75" id="body" name="body"></textarea>
<!--                    <a  value="submit" type="submit" class="float-right btn btn-dark"> <i  class="fa fa-comment"></i> submit</a>-->
                    <button type="submit" value="submit" class=" float-right btn btn-dark card-text fa fa-comment"> Submit</button>
                </form>
            </div>
        </div>
    </div>
</div>
</div>
<!---->
<!--new comment boxex-->
<div class="container">


    <div class="card w-25 p-3" th:each="comment : ${allComments}">
        <div class="card-body">
            <div class="row">
                <div>
                </div>
                <div class="col-md-10">
                    <p>
<!--                        <strong> AkashManiruzzaman</strong></a>-->
                    <div class="card-text"><h2 th:text="${comment.getUser().getUsername()}"></h2></div>
                    <div class="card-text"><p th:text="${comment.getBody()}"></p></div>
                    <div th:switch="${user_id !=0}">
                        <div th:case="${true}">
                            <div th:switch="${comment.user.username.equals(user.username)}">
                                <div th:case="${true}">
                    </p>


                                    <div class="d-flex">
                                        <form th:action="@{'/comments/edit'}" method="get">
                                            <input type="hidden" name="commentId" th:value="${comment.id}"/>
                                            <input type="hidden" name="postId" th:value="${post.id}"/>
<!--                                            <button type="submit" class="float-right btn text-black btn-warning mx-1">Edit</button>-->
                                            <button type="submit" class="btn btn-primary">
                                                <i class="far fa-edit submit"></i>
                                        </form>
                                    </div>


                </div>
            </div>
<!--end new -->
<!--    post all comments-->


                        <div class="d-flex ">
                            <form th:action="@{'/comments/delete'}" method="post">
                                <input type="hidden" name="commentId" th:value="${comment.id}"/>
                                <input type="hidden" name="postId" th:value="${post.id}"/>
                                <button type="submit" class="btn btn-danger">
                                    <i class="far fa-trash-alt submit"></i>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<<<<<<< HEAD
=======
<!--<footer th:replace="partials/footer :: footer"></footer>-->
>>>>>>> 398a8c6d21edc6525d31a0dbad8579935810c244
<scripts th:replace="partials/scripts :: scripts"/>
</body>
</html>